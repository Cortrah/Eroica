<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Progress</title>

    <link rel="icon" href="./img/icons/favicon.ico">

    <style>
        html {
            height: 100%;
            margin: 0;
        }
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-image: url('https://cortrah.github.io/eroica-2022/2.jpg');
            background-repeat: repeat repeat;
        }
        h1 {
            font-family: 'Didact Gothic', "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
            font-size: 20px;
        }
        h3 {
            font-family: 'Didact Gothic', "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
            font-size: 16px;
        }
        a {
            color: whitesmoke;
            margin-left: 20px;
            text-decoration:none;
        }
        a:hover {
            cursor: pointer;
            text-decoration: underline;
            color: #daa520;
        }
        .nav-wrapper {
            min-height: 50px;
        }
        #nav {
            font-family: 'Didact Gothic', "HelveticaNeue", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
            font-size: 20px;
            background-color: #222222;
            border-bottom: #93742A;
            border-width: 5px;
            text-align: center;
            vertical-align: text-bottom;
            line-height: 2;
            min-height: 40px;
        }
        #mainWrapper {
            display: flex;
            justify-content: center;
            height: 100%;
            width: 100%;
        }

        .aligncenter {
            text-align: center;
        }

    </style>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Odibee+Sans&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap" rel="stylesheet">
</head>
<body>
<div class="nav-wrapper" >
    <div id="nav">
        <a href="index.html">Eroica</a>
        <a href="introduction.html">Introduction</a>
        <a href="urworld.html">Ur World</a>
        <a href="progress.html">Progress</a>
        <a href="help.html">Help</a>
        <a href="about.html">About</a>
    </div>
</div>
<div id="mainWrapper" >
  <div style="color: whitesmoke; font-family: 'Century Gothic', 'Helvetica', sans-serif;max-width: 520px; align-items: center">
    <h1>Progress</h1>

    <p>
        As you visit the episodes of Eroica, the Ur Map updates to represent which episodes have been viewed.
        This progress is saved by default by the browser with which you are viewing the piece.
        If you would like to manually save your progress as a file in order to transfer it to another browser
        or to reload it at anohter time you may use the button below to save the current progress as a file.
        By default it will be named eroica.txt but you can change that if you wish.
    </p>

    <h3>
        Download Progress as
    </h3>
    <input id="fileNameInput" value="eroica.txt"/>
    <button onclick="window.downloadProgress()">
        Save
    </button>
    <br/>
    <br/>

    <p>
        To upload a saved state of the progress, use the button below to select a previously saved file.
    </p>

    <h3 onclick="window.uploadProgress()">
        Upload Progress from
    </h3>
    <input id='fileNameUploadInput' type="file" onchange="loadTextFromFile(event)">
    <br/>
    <br/>

    <p>
        In order to clear all progres and reset the state of the Ur World to the begining, click the "Clear" button below.
    </p>

    <h3>
        Clear All Progress
    </h3>
    <button onclick="window.clearProgressAndGoBack()">
        Clear
    </button>
    <br/>
    <br/>

    <p>
        <img src="img/icons/eye-sm.png" oncontextmenu="window.toggleTests(event)"/>
    </p>
    <div id="tests" style="display: none;float: right">
        <br/>
        <h3 style="text-align: center">
            Tests
        </h3>
        <button onclick="testAFewInAct1()" style="width: 260px">A few selected in Act 1</button>
        <br/>
        <button onclick="testAboutToFinishAct1()" style="width: 260px">About to finish Act 1</button>
        <br/>
        <button onclick="testAboutToFinishAct2()" style="width: 260px">About to finish Act 2</button>
        <br/>
        <button onclick="testEnableFinale()" style="width: 260px">About to enable finale</button>
        <br/>
    </div>
  </div>
</div>
<script>
    let clearAll = { episodes: [
            { code:"act1_v1_n1", clr:"#d2ae77", glimmer:"Promptings and Seizures",                  status:"not-visited"},
            { code:"act1_v1_n2", clr:"#453636", glimmer:"Gypsy? Goat-man? Golem?",                  status:"not-visited"},
            { code:"act1_v1_n3", clr:"#494f4f", glimmer:"A Whited Sepulcher!",                      status:"not-visited"},
            { code:"act1_v1_n4", clr:"#ab948f", glimmer:"the tic-ridden golem.",                    status:"not-visited"},
            { code:"act1_v1_p1", clr:"#aba9aa", glimmer:"Window...Mirror...Eye",                    status:"not-visited"},
            { code:"act1_v1_p2", clr:"#590d18", glimmer:"Ecstasy has wings and talons.",            status:"not-visited"},
            { code:"act1_v1_m1", clr:"#ffffff", glimmer:"Make it speak, said the Princess.",        status:"not-visited"},
            { code:"act1_t1_n1", clr:"#bababa", glimmer:"This Terrible Century",                    status:"not-visited"},
            { code:"act1_t1_n2", clr:"#7a0000", glimmer:"My Eric Red will burn us pure.",           status:"not-visited"},
            { code:"act1_t1_n3", clr:"#804d41", glimmer:"A Chaos of Deformed Sound",                status:"not-visited"},
            { code:"act1_t1_n4", clr:"#d08a8c", glimmer:"The Aryans of Hell",                       status:"not-visited"},
            { code:"act1_t1_p1", clr:"#d14c1a", glimmer:"I am the mirror of your soul.",            status:"not-visited"},
            { code:"act1_t1_p2", clr:"#73665b", glimmer:"What fire charred that piteous face?",     status:"not-visited"},
            { code:"act1_t1_m1", clr:"#5a1b1b", glimmer:"...the war-torn tilth of the Underworld",  status:"not-visited"},
            { code:"act1_a1_n1", clr:"#7c8265", glimmer:"Eyes deep as hell",                        status:"not-visited"},
            { code:"act1_a1_n2", clr:"#4d3b38", glimmer:"The eagle has pierced your eye.",          status:"not-visited"},
            { code:"act1_a1_n3", clr:"#feaa48", glimmer:"...doomed to burn itself to ash.",         status:"not-visited"},
            { code:"act1_a1_n4", clr:"#e0d3c2", glimmer:"...a living nightmare of enslavement.",    status:"not-visited"},
            { code:"act1_a1_p1", clr:"#2b2b2b", glimmer:"...the mirror of your dream.",             status:"not-visited"},
            { code:"act1_a1_p2", clr:"#b5302b", glimmer:"how to divide faith from fire?",           status:"not-visited"},
            { code:"act1_a1_m1", clr:"#aeaeae", glimmer:"Once in a backward bending of time ...",   status:"not-visited"},
            { code:"act1_v2_n1", clr:"#52504f", glimmer:"My Painter's Eye",                         status:"not-visited"},
            { code:"act1_v2_n2", clr:"#dcc2b7", glimmer:"The Music of the Spheres",                 status:"not-visited"},
            { code:"act1_v2_n3", clr:"#09810d", glimmer:"...as chatoyant as a moonlit Sargasso",    status:"not-visited"},
            { code:"act1_v2_n4", clr:"#b3b0b1", glimmer:"...the sweetlty tipped coronals",          status:"not-visited"},
            { code:"act1_v2_p1", clr:"#82765f", glimmer:"cleft by ecstasy...folded in thought",     status:"not-visited"},
            { code:"act1_v2_p2", clr:"#c27627", glimmer:"where love has no dimension",              status:"not-visited"},
            { code:"act1_v2_m1", clr:"#61b899", glimmer:"The Eternal Pumice of Time",               status:"not-visited"},
            { code:"act1_t2_n1", clr:"#ecab78", glimmer:"Copy the skull exact.",                    status:"not-visited"},
            { code:"act1_t2_n2", clr:"#880808", glimmer:"The Subtle Churn of Viscera.",             status:"not-visited"},
            { code:"act1_t2_n3", clr:"#664d51", glimmer:"Moonmad. Wild dreams.",                    status:"not-visited"},
            { code:"act1_t2_n4", clr:"#7d778a", glimmer:"A Tomb of Maggoty Music",                  status:"not-visited"},
            { code:"act1_t2_p1", clr:"#590e10", glimmer:"I, Eric the Red, desire fire.",            status:"not-visited"},
            { code:"act1_t2_p2", clr:"#a7a5a5", glimmer:"...Deeper than the cave of Nihil...",      status:"not-visited"},
            { code:"act1_t2_m1", clr:"#e10000", glimmer:"I graze on flames.",                       status:"not-visited"},
            { code:"act1_a2_n1", clr:"#decdaa", glimmer:"Be as still as night...",                  status:"not-visited"},
            { code:"act1_a2_n2", clr:"#71542d", glimmer:"...beat of bone on bone.",                 status:"not-visited"},
            { code:"act1_a2_n3", clr:"#880200", glimmer:"...lines like vines one to one.",          status:"not-visited"},
            { code:"act1_a2_n4", clr:"#914937", glimmer:"Paint my body, Nusala.",                   status:"not-visited"},
            { code:"act1_a2_p1", clr:"#fac385", glimmer:"Will you walk with me, Sister?",           status:"not-visited"},
            { code:"act1_a2_p2", clr:"#a61f24", glimmer:"Mine is not a serpent love.",              status:"not-visited"},
            { code:"act1_a2_m1", clr:"#b21f18", glimmer:"Where I sing, love is fire.",              status:"not-visited"},
            { code:"act1_v3_n1", clr:"#603516", glimmer:"...but ethically eage-eyed.",              status:"not-visited"},
            { code:"act1_v3_n2", clr:"#d1a29f", glimmer:"Ach! The issue is beyond measure.",        status:"not-visited"},
            { code:"act1_v3_n3", clr:"#979797", glimmer:"...but also wingéd.",                      status:"not-visited"},
            { code:"act1_v3_n4", clr:"#6d5040", glimmer:"...and didn't she have a sweet face.",     status:"not-visited"},
            { code:"act1_v3_p1", clr:"#a70f12", glimmer:"...in form like a dove.",                  status:"not-visited"},
            { code:"act1_v3_p2", clr:"#a70f12", glimmer:"...petals baited with blood.",             status:"not-visited"},
            { code:"act1_v3_m1", clr:"#9daef2", glimmer:"The tale will tell.",                      status:"not-visited"},
            { code:"act1_t3_n1", clr:"#427b91", glimmer:"Come with me to the city",                 status:"not-visited"},
            { code:"act1_t3_n2", clr:"#bb9fa3", glimmer:"He can a new self make.",                  status:"not-visited"},
            { code:"act1_t3_n3", clr:"#96664b", glimmer:"...unleash the ravening beasts of prey.",  status:"not-visited"},
            { code:"act1_t3_n4", clr:"#b4b2a7", glimmer:"...a demon who wears his spine on his back",              status:"not-visited"},
            { code:"act1_t3_p1", clr:"#b4b2a7", glimmer:"...to Helene's maimed body.",                             status:"not-visited"},
            { code:"act1_t3_p2", clr:"#afb1b0", glimmer:"Beauty dies. Art dies.",                                  status:"not-visited"},
            { code:"act1_t3_m1", clr:"#acb1af", glimmer:"O Father Beware!",                                        status:"not-visited"},
            { code:"act1_a3_n1", clr:"#d59731", glimmer:"Bizarre screed of chants and sticks.",                    status:"not-visited"},
            { code:"act1_a3_n2", clr:"#a6a295", glimmer:"The whore of Babylon is dead.",                           status:"not-visited"},
            { code:"act1_a3_n3", clr:"#aaa596", glimmer:"Up the river we must go.",                                status:"not-visited"},
            { code:"act1_a3_n4", clr:"#fce2d4", glimmer:"The Great Teatro Amazonas.",                              status:"not-visited"},
            { code:"act1_a3_p1", clr:"#b47b33", glimmer:"Do not blot me out of the Book of Life.",                 status:"not-visited"},
            { code:"act1_a3_p2", clr:"#be8245", glimmer:"Show me the wings of freedom.",                           status:"not-visited"},
            { code:"act1_a3_m1", clr:"#cfb086", glimmer:"Man eat cayman. Cayman eat man.",                         status:"not-visited"},
            { code:"act2_v4_h",  clr:"#e8e3c0", glimmer:"Post coitum omne animalium triste est.",                  status:"not-visited"},
            { code:"act2_v4_s",  clr:"#2e2e2e", glimmer:"...gone the lotuses blessing the air with chaste light.", status:"not-visited"},
            { code:"act2_v5_h",  clr:"#980403", glimmer:"Crowing laughter unfurls like a crimson fan.",            status:"not-visited"},
            { code:"act2_v5_s",  clr:"#d88c76", glimmer:"...as when fiery beasts leap to the fray...",             status:"not-visited"},
            { code:"act2_v6_h",  clr:"#aea091", glimmer:"...to the chamber of futurity.",                          status:"not-visited"},
            { code:"act2_v6_s",  clr:"#b42625", glimmer:"Angel, eagle, Eva, Engel.",                               status:"not-visited"},
            { code:"act2_t4_h",  clr:"#a58a73", glimmer:"...where angels plummet past rundled windows...",         status:"not-visited"},
            { code:"act2_t4_s",  clr:"#afb1b0", glimmer:"Flung from the maelstrom of Time...",                     status:"not-visited"},
            { code:"act2_t5_h",  clr:"#bce8f4", glimmer:"Let the dead sleep, Berndt.",                             status:"not-visited"},
            { code:"act2_t5_s",  clr:"#c5c5c5", glimmer:"Wind wrinkles the river, worries the curtains...",        status:"not-visited"},
            { code:"act2_t6_h",  clr:"#aaaaaa", glimmer:"...a moonstruck bestiary, prancing and baying...",        status:"not-visited"},
            { code:"act2_t6_s",  clr:"#7d0000", glimmer:"...demonic dreams of healing fire...",                    status:"not-visited"},
            { code:"act2_a4_h",  clr:"#535554", glimmer:"...The forest weaves a covert of leaves.",                status:"not-visited"},
            { code:"act2_a4_s",  clr:"#562834", glimmer:"Those are pits that were his eyes.",                      status:"not-visited"},
            { code:"act2_a5_h",  clr:"#cabfaa", glimmer:"Who are these so strangely fashioned?",                   status:"not-visited"},
            { code:"act2_a5_s",  clr:"#65594b", glimmer:"...bitter auguries of raucous fowl...",                   status:"not-visited"},
            { code:"act2_a6_h",  clr:"#943420", glimmer:"...High piping pf ardent birds...",                       status:"not-visited"},
            { code:"act2_a6_s",  clr:"#f91c1f", glimmer:"The specter in the fire fixes an eyeless gaze...",        status:"not-visited"},
            { code:"act3_v_h",   clr:"#ab7534", glimmer:"Ah Eva. Engel, angel, apple of our eye.",                 status:"not-visited"},
            { code:"act3_v_s",   clr:"#3f8060", glimmer:"...Impaled on the finial of a cat's eye...",              status:"not-visited"},
            { code:"act3_t_h",   clr:"#6c3637", glimmer:"...music flares in the sky like a phoenix...",            status:"not-visited"},
            { code:"act3_t_s",   clr:"#d48368", glimmer:"The wind of Chaos annihilates the antipodes.",            status:"not-visited"},
            { code:"act3_a_h",   clr:"#c2da6e", glimmer:"All signs favorable, howlers subdued.",                   status:"not-visited"},
            { code:"act3_a_s",   clr:"#c9c6ae", glimmer:"The house of the moon is grimed.",                        status:"not-visited"},
            { code:"finale",     clr:"#abcb3a", glimmer:"Scarab Exits",                                            status:"not-visited"}
        ]
    }

    let aFewInAct1 = { episodes: [
            { code:"act1_v1_n1", glimmer:"Promptings and Seizures",           status:"visited"},
            { code:"act1_v1_n2", glimmer:"Sounding Brass",                    status:"visited"},
            { code:"act1_v1_n3", glimmer:"A Whited Sepulcher",                status:"visited"},
            { code:"act1_v1_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            { code:"act1_v1_p1", glimmer:"Window Mirror Eye",                 status:"visited"},
            { code:"act1_v1_p2", glimmer:"Wings and Talons",                  status:"visited"},
            { code:"act1_v1_m1", glimmer:"A Puddle of Tallow",                status:"visited"},
            { code:"act1_t1_n1", glimmer:"A Cauldron of Rage",                status:"visited"},
            { code:"act1_t1_n2", glimmer:"Burn us Pure",                      status:"not-visited"},
            { code:"act1_t1_n3", glimmer:"Your Phoenix Song",                 status:"not-visited"},
            { code:"act1_t1_n4", glimmer:"The Natzis Marching",               status:"not-visited"},
            { code:"act1_t1_p1", glimmer:"Love Like an Eagle",                status:"visited"},
            { code:"act1_t1_p2", glimmer:"Muse or Meat?",                     status:"not-visited"},
            { code:"act1_t1_m1", glimmer:"Weave a Multitudinous Music?",      status:"not-visited"},
            { code:"act1_a1_n1", glimmer:"Eyes Deep as Hell",                 status:"not-visited"},
            { code:"act1_a1_n2", glimmer:"The Worm is in Your Rum",           status:"not-visited"},
            { code:"act1_a1_n3", glimmer:"The Tablet was Broken",             status:"visited"},
            { code:"act1_a1_n4", glimmer:"No Ear for Salvation?",             status:"not-visited"},
            { code:"act1_a1_p1", glimmer:"Divide Faith from Fire",            status:"not-visited"},
            { code:"act1_a1_p2", glimmer:"Muse? Or Thrall of Eros?",          status:"not-visited"},
            { code:"act1_a1_m1", glimmer:"I AM THAT I AM",                    status:"not-visited"},
            { code:"act1_v2_n1", glimmer:"The Consummate Design",             status:"not-visited"},
            { code:"act1_v2_n2", glimmer:"Ahh Skin ...",                      status:"not-visited"},
            { code:"act1_v2_n3", glimmer:"Paint the Frieze",                  status:"not-visited"},
            { code:"act1_v2_n4", glimmer:"Build the Temple",                  status:"not-visited"},
            { code:"act1_v2_p1", glimmer:"Dream Brothers",                    status:"not-visited"},
            { code:"act1_v2_p2", glimmer:"Rubblous Ghouls",                   status:"not-visited"},
            { code:"act1_v2_m1", glimmer:"An Eye, Sire",                      status:"not-visited"},
            { code:"act1_t2_n1", glimmer:"We Must Have it Exact",             status:"not-visited"},
            { code:"act1_t2_n2", glimmer:"Low Wind of Lungs",                 status:"not-visited"},
            { code:"act1_t2_n3", glimmer:"In This House of Nordquist",        status:"not-visited"},
            { code:"act1_t2_n4", glimmer:"A Tomb of Maggoty Music",           status:"not-visited"},
            { code:"act1_t2_p1", glimmer:"Sounds the Urklang",                status:"not-visited"},
            { code:"act1_t2_p2", glimmer:"The Many-Eyed Eater of Carrion",    status:"not-visited"},
            { code:"act1_t2_m1", glimmer:"I Smooth Stones I Bleach Bones",    status:"not-visited"},
            { code:"act1_a2_n1", glimmer:"Like the Morning Cantoo",           status:"not-visited"},
            { code:"act1_a2_n2", glimmer:"All Music is Married",              status:"not-visited"},
            { code:"act1_a2_n3", glimmer:"A Strong River",                    status:"not-visited"},
            { code:"act1_a2_n4", glimmer:"A Cathedral of Nature",             status:"not-visited"},
            { code:"act1_a2_p1", glimmer:"A Fragrant Fire",                   status:"not-visited"},
            { code:"act1_a2_p2", glimmer:"There are Three",                   status:"not-visited"},
            { code:"act1_a2_m1", glimmer:"Once a Warrior. Now a Diva.",       status:"not-visited"},
            { code:"act1_v3_n1", glimmer:"Look to Mozart",                    status:"not-visited"},
            { code:"act1_v3_n2", glimmer:"Faithful to Measure",               status:"not-visited"},
            { code:"act1_v3_n3", glimmer:"We Know Not",                       status:"not-visited"},
            { code:"act1_v3_n4", glimmer:"Demon Dance of the New",            status:"not-visited"},
            { code:"act1_v3_p1", glimmer:"I Open my Portals",                 status:"not-visited"},
            { code:"act1_v3_p2", glimmer:"Harmony to His Grave",              status:"not-visited"},
            { code:"act1_v3_m1", glimmer:"The Tale will Tell",                status:"not-visited"},
            { code:"act1_t3_n1", glimmer:"The Birds Themselves are Hoarse",   status:"not-visited"},
            { code:"act1_t3_n2", glimmer:"Birth to the New Body",             status:"not-visited"},
            { code:"act1_t3_n3", glimmer:"Alas Poor Ludwig",                  status:"not-visited"},
            { code:"act1_t3_n4", glimmer:"Some Dybbuk",                       status:"not-visited"},
            { code:"act1_t3_p1", glimmer:"Ja, My Noble Necropolis",           status:"not-visited"},
            { code:"act1_t3_p2", glimmer:"To Helene's Maimed Body",           status:"not-visited"},
            { code:"act1_t3_m1", glimmer:"O Father Beware",                   status:"not-visited"},
            { code:"act1_a3_n1", glimmer:"Coconut Codpiece",                  status:"not-visited"},
            { code:"act1_a3_n2", glimmer:"The Many-In-One",                   status:"not-visited"},
            { code:"act1_a3_n3", glimmer:"Pluck the Worm",                    status:"not-visited"},
            { code:"act1_a3_n4", glimmer:"Mausoleum for the Rubber",          status:"not-visited"},
            { code:"act1_a3_p1", glimmer:"The Bondage of Buildings",          status:"not-visited"},
            { code:"act1_a3_p2", glimmer:"Cleanse Mother Church",             status:"not-visited"},
            { code:"act1_a3_m1", glimmer:"Cayman Eat Man",                    status:"not-visited"},
            { code:"act2_v4_h",  glimmer:"Omne Animalium Triste Est",         status:"not-visited"},
            { code:"act2_v4_s",  glimmer:"Mementos Mori Gnawing",             status:"not-visited"},
            { code:"act2_v5_h",  glimmer:"The Satiny Searchless Heart",       status:"not-visited"},
            { code:"act2_v5_s",  glimmer:"Drear Ghouls and Dread Divinities", status:"not-visited"},
            { code:"act2_v6_h",  glimmer:"Down the Garden Path",              status:"not-visited"},
            { code:"act2_v6_s",  glimmer:"Where Now?",                        status:"not-visited"},
            { code:"act2_t4_h",  glimmer:"Knell the Brief Suspension",        status:"not-visited"},
            { code:"act2_t4_s",  glimmer:"Listen to the Danse Macabre",       status:"not-visited"},
            { code:"act2_t5_h",  glimmer:"Let the Dead Sleep",                status:"not-visited"},
            { code:"act2_t5_s",  glimmer:"Ravenous Monster History",          status:"not-visited"},
            { code:"act2_t6_h",  glimmer:"A Thin Thread of Redemption",       status:"not-visited"},
            { code:"act2_t6_s",  glimmer:"Fire Storms Consume Memory",        status:"not-visited"},
            { code:"act2_a4_h",  glimmer:"A Mantel of Stars",                 status:"not-visited"},
            { code:"act2_a4_s",  glimmer:"Pits That Were His Eyes",           status:"not-visited"},
            { code:"act2_a5_h",  glimmer:"Fellow Seekers of Peace",           status:"not-visited"},
            { code:"act2_a5_s",  glimmer:"Drowned in Violent Waters",         status:"not-visited"},
            { code:"act2_a6_h",  glimmer:"Floret of Faces",                   status:"not-visited"},
            { code:"act2_a6_s",  glimmer:"Teeth and Talons",                  status:"not-visited"},
            { code:"act3_v_h",   glimmer:"Apple of Our Eye",                  status:"not-visited"},
            { code:"act3_v_s",   glimmer:"Baleful Moon Glow",                 status:"not-visited"},
            { code:"act3_t_h",   glimmer:"The Star of a Second Coming",       status:"not-visited"},
            { code:"act3_t_s",   glimmer:"Rue, Rue, Rue",                     status:"not-visited"},
            { code:"act3_a_h",   glimmer:"A Braided Crown of Unity",          status:"not-visited"},
            { code:"act3_a_s",   glimmer:"Assault of the Deniers",            status:"not-visited"},
            { code:"finale",     glimmer:"Scarab Exits",                      status:"not-visited"}
        ]};

    let aboutToFinishAct1 = { episodes: [
            { code:"act1_v1_n1", glimmer:"Promptings and Seizures",           status:"visited"},
            { code:"act1_v1_n2", glimmer:"Sounding Brass",                    status:"visited"},
            { code:"act1_v1_n3", glimmer:"A Whited Sepulcher",                status:"visited"},
            { code:"act1_v1_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            { code:"act1_v1_p1", glimmer:"Window Mirror Eye",                 status:"visited"},
            { code:"act1_v1_p2", glimmer:"Wings and Talons",                  status:"visited"},
            { code:"act1_v1_m1", glimmer:"A Puddle of Tallow",                status:"visited"},
            { code:"act1_t1_n1", glimmer:"A Cauldron of Rage",                status:"visited"},
            { code:"act1_t1_n2", glimmer:"Burn us Pure",                      status:"visited"},
            { code:"act1_t1_n3", glimmer:"Your Phoenix Song",                 status:"visited"},
            { code:"act1_t1_n4", glimmer:"The Natzis Marching",               status:"visited"},
            { code:"act1_t1_p1", glimmer:"Love Like an Eagle",                status:"visited"},
            { code:"act1_t1_p2", glimmer:"Muse or Meat?",                     status:"visited"},
            { code:"act1_t1_m1", glimmer:"Weave a Multitudinous Music?",      status:"visited"},
            { code:"act1_a1_n1", glimmer:"Eyes Deep as Hell",                 status:"visited"},
            { code:"act1_a1_n2", glimmer:"The Worm is in Your Rum",           status:"visited"},
            { code:"act1_a1_n3", glimmer:"The Tablet was Broken",             status:"visited"},
            { code:"act1_a1_n4", glimmer:"No Ear for Salvation?",             status:"visited"},
            { code:"act1_a1_p1", glimmer:"Divide Faith from Fire",            status:"visited"},
            { code:"act1_a1_p2", glimmer:"Muse? Or Thrall of Eros?",          status:"visited"},
            { code:"act1_a1_m1", glimmer:"I AM THAT I AM",                    status:"visited"},
            { code:"act1_v2_n1", glimmer:"The Consummate Design",             status:"visited"},
            { code:"act1_v2_n2", glimmer:"Ahh Skin ...",                      status:"visited"},
            { code:"act1_v2_n3", glimmer:"Paint the Frieze",                  status:"visited"},
            { code:"act1_v2_n4", glimmer:"Build the Temple",                  status:"visited"},
            { code:"act1_v2_p1", glimmer:"Dream Brothers",                    status:"visited"},
            { code:"act1_v2_p2", glimmer:"Rubblous Ghouls",                   status:"visited"},
            { code:"act1_v2_m1", glimmer:"An Eye, Sire",                      status:"visited"},
            { code:"act1_t2_n1", glimmer:"We Must Have it Exact",             status:"visited"},
            { code:"act1_t2_n2", glimmer:"Low Wind of Lungs",                 status:"visited"},
            { code:"act1_t2_n3", glimmer:"In This House of Nordquist",        status:"visited"},
            { code:"act1_t2_n4", glimmer:"A Tomb of Maggoty Music",           status:"visited"},
            { code:"act1_t2_p1", glimmer:"Sounds the Urklang",                status:"visited"},
            { code:"act1_t2_p2", glimmer:"The Many-Eyed Eater of Carrion",    status:"visited"},
            { code:"act1_t2_m1", glimmer:"I Smooth Stones I Bleach Bones",    status:"visited"},
            { code:"act1_a2_n1", glimmer:"Like the Morning Cantoo",           status:"visited"},
            { code:"act1_a2_n2", glimmer:"All Music is Married",              status:"visited"},
            { code:"act1_a2_n3", glimmer:"A Strong River",                    status:"visited"},
            { code:"act1_a2_n4", glimmer:"A Cathedral of Nature",             status:"visited"},
            { code:"act1_a2_p1", glimmer:"A Fragrant Fire",                   status:"visited"},
            { code:"act1_a2_p2", glimmer:"There are Three",                   status:"visited"},
            { code:"act1_a2_m1", glimmer:"Once a Warrior. Now a Diva.",       status:"visited"},
            { code:"act1_v3_n1", glimmer:"Look to Mozart",                    status:"visited"},
            { code:"act1_v3_n2", glimmer:"Faithful to Measure",               status:"visited"},
            { code:"act1_v3_n3", glimmer:"We Know Not",                       status:"visited"},
            { code:"act1_v3_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            { code:"act1_v3_p1", glimmer:"I Open my Portals",                 status:"visited"},
            { code:"act1_v3_p2", glimmer:"Harmony to His Grave",              status:"visited"},
            { code:"act1_v3_m1", glimmer:"The Tale will Tell",                status:"visited"},
            { code:"act1_t3_n1", glimmer:"The Birds Themselves are Hoarse",   status:"visited"},
            { code:"act1_t3_n2", glimmer:"Birth to the New Body",             status:"visited"},
            { code:"act1_t3_n3", glimmer:"Alas Poor Ludwig",                  status:"visited"},
            { code:"act1_t3_n4", glimmer:"Some Dybbuk",                       status:"visited"},
            { code:"act1_t3_p1", glimmer:"Ja, My Noble Necropolis",           status:"visited"},
            { code:"act1_t3_p2", glimmer:"To Helene's Maimed Body",           status:"visited"},
            { code:"act1_t3_m1", glimmer:"O Father Beware",                   status:"visited"},
            { code:"act1_a3_n1", glimmer:"Coconut Codpiece",                  status:"visited"},
            { code:"act1_a3_n2", glimmer:"The Many-In-One",                   status:"visited"},
            { code:"act1_a3_n3", glimmer:"Pluck the Worm",                    status:"visited"},
            { code:"act1_a3_n4", glimmer:"Mausoleum for the Rubber",          status:"visited"},
            { code:"act1_a3_p1", glimmer:"The Bondage of Buildings",          status:"visited"},
            { code:"act1_a3_p2", glimmer:"Cleanse Mother Church",             status:"visited"},
            { code:"act1_a3_m1", glimmer:"Cayman Eat Man",                    status:"not-visited"},
            { code:"act2_v4_h",  glimmer:"Omne Animalium Triste Est",         status:"not-visited"},
            { code:"act2_v4_s",  glimmer:"Mementos Mori Gnawing",             status:"not-visited"},
            { code:"act2_v5_h",  glimmer:"The Satiny Searchless Heart",       status:"not-visited"},
            { code:"act2_v5_s",  glimmer:"Drear Ghouls and Dread Divinities", status:"not-visited"},
            { code:"act2_v6_h",  glimmer:"Down the Garden Path",              status:"not-visited"},
            { code:"act2_v6_s",  glimmer:"Where Now?",                        status:"not-visited"},
            { code:"act2_t4_h",  glimmer:"Knell the Brief Suspension",        status:"not-visited"},
            { code:"act2_t4_s",  glimmer:"Listen to the Danse Macabre",       status:"not-visited"},
            { code:"act2_t5_h",  glimmer:"Let the Dead Sleep",                status:"not-visited"},
            { code:"act2_t5_s",  glimmer:"Ravenous Monster History",          status:"not-visited"},
            { code:"act2_t6_h",  glimmer:"A Thin Thread of Redemption",       status:"not-visited"},
            { code:"act2_t6_s",  glimmer:"Fire Storms Consume Memory",        status:"not-visited"},
            { code:"act2_a4_h",  glimmer:"A Mantel of Stars",                 status:"not-visited"},
            { code:"act2_a4_s",  glimmer:"Pits That Were His Eyes",           status:"not-visited"},
            { code:"act2_a5_h",  glimmer:"Fellow Seekers of Peace",           status:"not-visited"},
            { code:"act2_a5_s",  glimmer:"Drowned in Violent Waters",         status:"not-visited"},
            { code:"act2_a6_h",  glimmer:"Floret of Faces",                   status:"not-visited"},
            { code:"act2_a6_s",  glimmer:"Teeth and Talons",                  status:"not-visited"},
            { code:"act3_v_h",   glimmer:"Apple of Our Eye",                  status:"not-visited"},
            { code:"act3_v_s",   glimmer:"Baleful Moon Glow",                 status:"not-visited"},
            { code:"act3_t_h",   glimmer:"The Star of a Second Coming",       status:"not-visited"},
            { code:"act3_t_s",   glimmer:"Rue, Rue, Rue",                     status:"not-visited"},
            { code:"act3_a_h",   glimmer:"A Braided Crown of Unity",          status:"not-visited"},
            { code:"act3_a_s",   glimmer:"Assault of the Deniers",            status:"not-visited"},
            { code:"finale",     glimmer:"Scarab Exits",                      status:"not-visited"}
        ]};

    let aboutToFinishAct2 = { episodes: [
            {  code:"act1_v1_n1", glimmer:"Promptings and Seizures",           status:"visited"},
            {  code:"act1_v1_n2", glimmer:"Sounding Brass",                    status:"visited"},
            {  code:"act1_v1_n3", glimmer:"A Whited Sepulcher",                status:"visited"},
            {  code:"act1_v1_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            {  code:"act1_v1_p1", glimmer:"Window Mirror Eye",                 status:"visited"},
            {  code:"act1_v1_p2", glimmer:"Wings and Talons",                  status:"visited"},
            {  code:"act1_v1_m1", glimmer:"A Puddle of Tallow",                status:"visited"},
            {  code:"act1_t1_n1", glimmer:"A Cauldron of Rage",                status:"visited"},
            {  code:"act1_t1_n2", glimmer:"Burn us Pure",                      status:"visited"},
            {  code:"act1_t1_n3", glimmer:"Your Phoenix Song",                 status:"visited"},
            {  code:"act1_t1_n4", glimmer:"The Natzis Marching",               status:"visited"},
            {  code:"act1_t1_p1", glimmer:"Love Like an Eagle",                status:"visited"},
            {  code:"act1_t1_p2", glimmer:"Muse or Meat?",                     status:"visited"},
            {  code:"act1_t1_m1", glimmer:"Weave a Multitudinous Music?",      status:"visited"},
            {  code:"act1_a1_n1", glimmer:"Eyes Deep as Hell",                 status:"visited"},
            {  code:"act1_a1_n2", glimmer:"The Worm is in Your Rum",           status:"visited"},
            {  code:"act1_a1_n3", glimmer:"The Tablet was Broken",             status:"visited"},
            {  code:"act1_a1_n4", glimmer:"No Ear for Salvation?",             status:"visited"},
            {  code:"act1_a1_p1", glimmer:"Divide Faith from Fire",            status:"visited"},
            {  code:"act1_a1_p2", glimmer:"Muse? Or Thrall of Eros?",          status:"visited"},
            {  code:"act1_a1_m1", glimmer:"I AM THAT I AM",                    status:"visited"},
            {  code:"act1_v2_n1", glimmer:"The Consummate Design",             status:"visited"},
            {  code:"act1_v2_n2", glimmer:"Ahh Skin ...",                      status:"visited"},
            {  code:"act1_v2_n3", glimmer:"Paint the Frieze",                  status:"visited"},
            {  code:"act1_v2_n4", glimmer:"Build the Temple",                  status:"visited"},
            {  code:"act1_v2_p1", glimmer:"Dream Brothers",                    status:"visited"},
            {  code:"act1_v2_p2", glimmer:"Rubblous Ghouls",                   status:"visited"},
            {  code:"act1_v2_m1", glimmer:"An Eye, Sire",                      status:"visited"},
            {  code:"act1_t2_n1", glimmer:"We Must Have it Exact",             status:"visited"},
            {  code:"act1_t2_n2", glimmer:"Low Wind of Lungs",                 status:"visited"},
            {  code:"act1_t2_n3", glimmer:"In This House of Nordquist",        status:"visited"},
            {  code:"act1_t2_n4", glimmer:"A Tomb of Maggoty Music",           status:"visited"},
            {  code:"act1_t2_p1", glimmer:"Sounds the Urklang",                status:"visited"},
            {  code:"act1_t2_p2", glimmer:"The Many-Eyed Eater of Carrion",    status:"visited"},
            {  code:"act1_t2_m1", glimmer:"I Smooth Stones I Bleach Bones",    status:"visited"},
            {  code:"act1_a2_n1", glimmer:"Like the Morning Cantoo",           status:"visited"},
            {  code:"act1_a2_n2", glimmer:"All Music is Married",              status:"visited"},
            {  code:"act1_a2_n3", glimmer:"A Strong River",                    status:"visited"},
            {  code:"act1_a2_n4", glimmer:"A Cathedral of Nature",             status:"visited"},
            {  code:"act1_a2_p1", glimmer:"A Fragrant Fire",                   status:"visited"},
            {  code:"act1_a2_p2", glimmer:"There are Three",                   status:"visited"},
            {  code:"act1_a2_m1", glimmer:"Once a Warrior. Now a Diva.",       status:"visited"},
            {  code:"act1_v3_n1", glimmer:"Look to Mozart",                    status:"visited"},
            {  code:"act1_v3_n2", glimmer:"Faithful to Measure",               status:"visited"},
            {  code:"act1_v3_n3", glimmer:"We Know Not",                       status:"visited"},
            {  code:"act1_v3_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            {  code:"act1_v3_p1", glimmer:"I Open my Portals",                 status:"visited"},
            {  code:"act1_v3_p2", glimmer:"Harmony to His Grave",              status:"visited"},
            {  code:"act1_v3_m1", glimmer:"The Tale will Tell",                status:"visited"},
            {  code:"act1_t3_n1", glimmer:"The Birds Themselves are Hoarse",   status:"visited"},
            {  code:"act1_t3_n2", glimmer:"Birth to the New Body",             status:"visited"},
            {  code:"act1_t3_n3", glimmer:"Alas Poor Ludwig",                  status:"visited"},
            {  code:"act1_t3_n4", glimmer:"Some Dybbuk",                       status:"visited"},
            {  code:"act1_t3_p1", glimmer:"Ja, My Noble Necropolis",           status:"visited"},
            {  code:"act1_t3_p2", glimmer:"To Helene's Maimed Body",           status:"visited"},
            {  code:"act1_t3_m1", glimmer:"O Father Beware",                   status:"visited"},
            {  code:"act1_a3_n1", glimmer:"Coconut Codpiece",                  status:"visited"},
            {  code:"act1_a3_n2", glimmer:"The Many-In-One",                   status:"visited"},
            {  code:"act1_a3_n3", glimmer:"Pluck the Worm",                    status:"visited"},
            {  code:"act1_a3_n4", glimmer:"Mausoleum for the Rubber",          status:"visited"},
            {  code:"act1_a3_p1", glimmer:"The Bondage of Buildings",          status:"visited"},
            {  code:"act1_a3_p2", glimmer:"Cleanse Mother Church",             status:"visited"},
            {  code:"act1_a3_m1", glimmer:"Cayman Eat Man",                    status:"visited"},
            {  code:"act2_v4_h",  glimmer:"Omne Animalium Triste Est",         status:"visited"},
            {  code:"act2_v4_s",  glimmer:"Mementos Mori Gnawing",             status:"unchosen"},
            {  code:"act2_v5_h",  glimmer:"The Satiny Searchless Heart",       status:"visited"},
            {  code:"act2_v5_s",  glimmer:"Drear Ghouls and Dread Divinities", status:"unchosen"},
            {  code:"act2_v6_h",  glimmer:"Down the Garden Path",              status:"visited"},
            {  code:"act2_v6_s",  glimmer:"Where Now?",                        status:"unchosen"},
            {  code:"act2_t4_h",  glimmer:"Knell the Brief Suspension",        status:"visited"},
            {  code:"act2_t4_s",  glimmer:"Listen to the Danse Macabre",       status:"unchosen"},
            {  code:"act2_t5_h",  glimmer:"Let the Dead Sleep",                status:"visited"},
            {  code:"act2_t5_s",  glimmer:"Ravenous Monster History",          status:"unchosen"},
            {  code:"act2_t6_h",  glimmer:"A Thin Thread of Redemption",       status:"visited"},
            {  code:"act2_t6_s",  glimmer:"Fire Storms Consume Memory",        status:"unchosen"},
            {  code:"act2_a4_h",  glimmer:"A Mantel of Stars",                 status:"visited"},
            {  code:"act2_a4_s",  glimmer:"Pits That Were His Eyes",           status:"unchosen"},
            {  code:"act2_a5_h",  glimmer:"Fellow Seekers of Peace",           status:"visited"},
            {  code:"act2_a5_s",  glimmer:"Drowned in Violent Waters",         status:"unchosen"},
            {  code:"act2_a6_h",  glimmer:"Floret of Faces",                   status:"not-visited"},
            {  code:"act2_a6_s",  glimmer:"Teeth and Talons",                  status:"not-visited"},
            {  code:"act3_v_h",   glimmer:"Apple of Our Eye",                  status:"not-visited"},
            {  code:"act3_v_s",   glimmer:"Baleful Moon Glow",                 status:"not-visited"},
            {  code:"act3_t_h",   glimmer:"The Star of a Second Coming",       status:"not-visited"},
            {  code:"act3_t_s",   glimmer:"Rue, Rue, Rue",                     status:"not-visited"},
            {  code:"act3_a_h",   glimmer:"A Braided Crown of Unity",          status:"not-visited"},
            {  code:"act3_a_s",   glimmer:"Assault of the Deniers",            status:"not-visited"},
            {  code:"finale",     glimmer:"Scarab Exits",                      status:"not-visited"}
        ]};

    let enableFinale = { episodes: [
            { code:"act1_v1_n1", glimmer:"Promptings and Seizures",           status:"visited"},
            { code:"act1_v1_n2", glimmer:"Sounding Brass",                    status:"visited"},
            { code:"act1_v1_n3", glimmer:"A Whited Sepulcher",                status:"visited"},
            { code:"act1_v1_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            { code:"act1_v1_p1", glimmer:"Window Mirror Eye",                 status:"visited"},
            { code:"act1_v1_p2", glimmer:"Wings and Talons",                  status:"visited"},
            { code:"act1_v1_m1", glimmer:"A Puddle of Tallow",                status:"visited"},
            { code:"act1_t1_n1", glimmer:"A Cauldron of Rage",                status:"visited"},
            { code:"act1_t1_n2", glimmer:"Burn us Pure",                      status:"visited"},
            { code:"act1_t1_n3", glimmer:"Your Phoenix Song",                 status:"visited"},
            { code:"act1_t1_n4", glimmer:"The Natzis Marching",               status:"visited"},
            { code:"act1_t1_p1", glimmer:"Love Like an Eagle",                status:"visited"},
            { code:"act1_t1_p2", glimmer:"Muse or Meat?",                     status:"visited"},
            { code:"act1_t1_m1", glimmer:"Weave a Multitudinous Music?",      status:"visited"},
            { code:"act1_a1_n1", glimmer:"Eyes Deep as Hell",                 status:"visited"},
            { code:"act1_a1_n2", glimmer:"The Worm is in Your Rum",           status:"visited"},
            { code:"act1_a1_n3", glimmer:"The Tablet was Broken",             status:"visited"},
            { code:"act1_a1_n4", glimmer:"No Ear for Salvation?",             status:"visited"},
            { code:"act1_a1_p1", glimmer:"Divide Faith from Fire",            status:"visited"},
            { code:"act1_a1_p2", glimmer:"Muse? Or Thrall of Eros?",          status:"visited"},
            { code:"act1_a1_m1", glimmer:"I AM THAT I AM",                    status:"visited"},
            { code:"act1_v2_n1", glimmer:"The Consummate Design",             status:"visited"},
            { code:"act1_v2_n2", glimmer:"Ahh Skin ...",                      status:"visited"},
            { code:"act1_v2_n3", glimmer:"Paint the Frieze",                  status:"visited"},
            { code:"act1_v2_n4", glimmer:"Build the Temple",                  status:"visited"},
            { code:"act1_v2_p1", glimmer:"Dream Brothers",                    status:"visited"},
            { code:"act1_v2_p2", glimmer:"Rubblous Ghouls",                   status:"visited"},
            { code:"act1_v2_m1", glimmer:"An Eye, Sire",                      status:"visited"},
            { code:"act1_t2_n1", glimmer:"We Must Have it Exact",             status:"visited"},
            { code:"act1_t2_n2", glimmer:"Low Wind of Lungs",                 status:"visited"},
            { code:"act1_t2_n3", glimmer:"In This House of Nordquist",        status:"visited"},
            { code:"act1_t2_n4", glimmer:"A Tomb of Maggoty Music",           status:"visited"},
            { code:"act1_t2_p1", glimmer:"Sounds the Urklang",                status:"visited"},
            { code:"act1_t2_p2", glimmer:"The Many-Eyed Eater of Carrion",    status:"visited"},
            { code:"act1_t2_m1", glimmer:"I Smooth Stones I Bleach Bones",    status:"visited"},
            { code:"act1_a2_n1", glimmer:"Like the Morning Cantoo",           status:"visited"},
            { code:"act1_a2_n2", glimmer:"All Music is Married",              status:"visited"},
            { code:"act1_a2_n3", glimmer:"A Strong River",                    status:"visited"},
            { code:"act1_a2_n4", glimmer:"A Cathedral of Nature",             status:"visited"},
            { code:"act1_a2_p1", glimmer:"A Fragrant Fire",                   status:"visited"},
            { code:"act1_a2_p2", glimmer:"There are Three",                   status:"visited"},
            { code:"act1_a2_m1", glimmer:"Once a Warrior. Now a Diva.",       status:"visited"},
            { code:"act1_v3_n1", glimmer:"Look to Mozart",                    status:"visited"},
            { code:"act1_v3_n2", glimmer:"Faithful to Measure",               status:"visited"},
            { code:"act1_v3_n3", glimmer:"We Know Not",                       status:"visited"},
            { code:"act1_v3_n4", glimmer:"Demon Dance of the New",            status:"visited"},
            { code:"act1_v3_p1", glimmer:"I Open my Portals",                 status:"visited"},
            { code:"act1_v3_p2", glimmer:"Harmony to His Grave",              status:"visited"},
            { code:"act1_v3_m1", glimmer:"The Tale will Tell",                status:"visited"},
            { code:"act1_t3_n1", glimmer:"The Birds Themselves are Hoarse",   status:"visited"},
            { code:"act1_t3_n2", glimmer:"Birth to the New Body",             status:"visited"},
            { code:"act1_t3_n3", glimmer:"Alas Poor Ludwig",                  status:"visited"},
            { code:"act1_t3_n4", glimmer:"Some Dybbuk",                       status:"visited"},
            { code:"act1_t3_p1", glimmer:"Ja, My Noble Necropolis",           status:"visited"},
            { code:"act1_t3_p2", glimmer:"To Helene's Maimed Body",           status:"visited"},
            { code:"act1_t3_m1", glimmer:"O Father Beware",                   status:"visited"},
            { code:"act1_a3_n1", glimmer:"Coconut Codpiece",                  status:"visited"},
            { code:"act1_a3_n2", glimmer:"The Many-In-One",                   status:"visited"},
            { code:"act1_a3_n3", glimmer:"Pluck the Worm",                    status:"visited"},
            { code:"act1_a3_n4", glimmer:"Mausoleum for the Rubber",          status:"visited"},
            { code:"act1_a3_p1", glimmer:"The Bondage of Buildings",          status:"visited"},
            { code:"act1_a3_p2", glimmer:"Cleanse Mother Church",             status:"visited"},
            { code:"act1_a3_m1", glimmer:"Cayman Eat Man",                    status:"visited"},
            { code:"act2_v4_h",  glimmer:"Omne Animalium Triste Est",         status:"visited"},
            { code:"act2_v4_s",  glimmer:"Mementos Mori Gnawing",             status:"unchosen"},
            { code:"act2_v5_h",  glimmer:"The Satiny Searchless Heart",       status:"visited"},
            { code:"act2_v5_s",  glimmer:"Drear Ghouls and Dread Divinities", status:"unchosen"},
            { code:"act2_v6_h",  glimmer:"Down the Garden Path",              status:"visited"},
            { code:"act2_v6_s",  glimmer:"Where Now?",                        status:"unchosen"},
            { code:"act2_t4_h",  glimmer:"Knell the Brief Suspension",        status:"visited"},
            { code:"act2_t4_s",  glimmer:"Listen to the Danse Macabre",       status:"unchosen"},
            { code:"act2_t5_h",  glimmer:"Let the Dead Sleep",                status:"visited"},
            { code:"act2_t5_s",  glimmer:"Ravenous Monster History",          status:"unchosen"},
            { code:"act2_t6_h",  glimmer:"A Thin Thread of Redemption",       status:"visited"},
            { code:"act2_t6_s",  glimmer:"Fire Storms Consume Memory",        status:"unchosen"},
            { code:"act2_a4_h",  glimmer:"A Mantel of Stars",                 status:"visited"},
            { code:"act2_a4_s",  glimmer:"Pits That Were His Eyes",           status:"unchosen"},
            { code:"act2_a5_h",  glimmer:"Fellow Seekers of Peace",           status:"visited"},
            { code:"act2_a5_s",  glimmer:"Drowned in Violent Waters",         status:"unchosen"},
            { code:"act2_a6_h",  glimmer:"Floret of Faces",                   status:"visited"},
            { code:"act2_a6_s",  glimmer:"Teeth and Talons",                  status:"unchosen"},
            { code:"act3_v_h",   glimmer:"Apple of Our Eye",                  status:"visited"},
            { code:"act3_v_s",   glimmer:"Baleful Moon Glow",                 status:"unchosen"},
            { code:"act3_t_h",   glimmer:"The Star of a Second Coming",       status:"visited"},
            { code:"act3_t_s",   glimmer:"Rue, Rue, Rue",                     status:"unchosen"},
            { code:"act3_a_h",   glimmer:"A Braided Crown of Unity",          status:"not-visited"},
            { code:"act3_a_s",   glimmer:"Assault of the Deniers",            status:"unchosen"},
            { code:"finale",     glimmer:"Scarab Exits",                      status:"not-visited"}
        ]};

    window.addEventListener("load", function (event){
        window.state = {
            isUr: false,
            showVideoFullScreen: false,
            currentAct: "act1",
            finaleAvailable: false,
            displayingEpisode: false,
            episodes: [
                { code:"act1_v1_n1", clr:"#d2ae77", glimmer:"Promptings and Seizures",                  status:"not-visited"},
                { code:"act1_v1_n2", clr:"#453636", glimmer:"Gypsy? Goat-man? Golem?",                  status:"not-visited"},
                { code:"act1_v1_n3", clr:"#494f4f", glimmer:"A Whited Sepulcher!",                      status:"not-visited"},
                { code:"act1_v1_n4", clr:"#ab948f", glimmer:"the tic-ridden golem.",                    status:"not-visited"},
                { code:"act1_v1_p1", clr:"#aba9aa", glimmer:"Window...Mirror...Eye",                    status:"not-visited"},
                { code:"act1_v1_p2", clr:"#590d18", glimmer:"Ecstasy has wings and talons.",            status:"not-visited"},
                { code:"act1_v1_m1", clr:"#ffffff", glimmer:"Make it speak, said the Princess.",        status:"not-visited"},
                { code:"act1_t1_n1", clr:"#bababa", glimmer:"This Terrible Century",                    status:"not-visited"},
                { code:"act1_t1_n2", clr:"#7a0000", glimmer:"My Eric Red will burn us pure.",           status:"not-visited"},
                { code:"act1_t1_n3", clr:"#804d41", glimmer:"A Chaos of Deformed Sound",                status:"not-visited"},
                { code:"act1_t1_n4", clr:"#d08a8c", glimmer:"The Aryans of Hell",                       status:"not-visited"},
                { code:"act1_t1_p1", clr:"#d14c1a", glimmer:"I am the mirror of your soul.",            status:"not-visited"},
                { code:"act1_t1_p2", clr:"#73665b", glimmer:"What fire charred that piteous face?",     status:"not-visited"},
                { code:"act1_t1_m1", clr:"#5a1b1b", glimmer:"...the war-torn tilth of the Underworld",  status:"not-visited"},
                { code:"act1_a1_n1", clr:"#7c8265", glimmer:"Eyes deep as hell",                        status:"not-visited"},
                { code:"act1_a1_n2", clr:"#4d3b38", glimmer:"The eagle has pierced your eye.",          status:"not-visited"},
                { code:"act1_a1_n3", clr:"#feaa48", glimmer:"...doomed to burn itself to ash.",         status:"not-visited"},
                { code:"act1_a1_n4", clr:"#e0d3c2", glimmer:"...a living nightmare of enslavement.",    status:"not-visited"},
                { code:"act1_a1_p1", clr:"#2b2b2b", glimmer:"...the mirror of your dream.",             status:"not-visited"},
                { code:"act1_a1_p2", clr:"#b5302b", glimmer:"how to divide faith from fire?",           status:"not-visited"},
                { code:"act1_a1_m1", clr:"#aeaeae", glimmer:"Once in a backward bending of time ...",   status:"not-visited"},
                { code:"act1_v2_n1", clr:"#52504f", glimmer:"My Painter's Eye",                         status:"not-visited"},
                { code:"act1_v2_n2", clr:"#dcc2b7", glimmer:"The Music of the Spheres",                 status:"not-visited"},
                { code:"act1_v2_n3", clr:"#09810d", glimmer:"...as chatoyant as a moonlit Sargasso",    status:"not-visited"},
                { code:"act1_v2_n4", clr:"#b3b0b1", glimmer:"...the sweetlty tipped coronals",          status:"not-visited"},
                { code:"act1_v2_p1", clr:"#82765f", glimmer:"cleft by ecstasy...folded in thought",     status:"not-visited"},
                { code:"act1_v2_p2", clr:"#c27627", glimmer:"where love has no dimension",              status:"not-visited"},
                { code:"act1_v2_m1", clr:"#61b899", glimmer:"The Eternal Pumice of Time",               status:"not-visited"},
                { code:"act1_t2_n1", clr:"#ecab78", glimmer:"Copy the skull exact.",                    status:"not-visited"},
                { code:"act1_t2_n2", clr:"#880808", glimmer:"The Subtle Churn of Viscera.",             status:"not-visited"},
                { code:"act1_t2_n3", clr:"#664d51", glimmer:"Moonmad. Wild dreams.",                    status:"not-visited"},
                { code:"act1_t2_n4", clr:"#7d778a", glimmer:"A Tomb of Maggoty Music",                  status:"not-visited"},
                { code:"act1_t2_p1", clr:"#590e10", glimmer:"I, Eric the Red, desire fire.",            status:"not-visited"},
                { code:"act1_t2_p2", clr:"#a7a5a5", glimmer:"...Deeper than the cave of Nihil...",      status:"not-visited"},
                { code:"act1_t2_m1", clr:"#e10000", glimmer:"I graze on flames.",                       status:"not-visited"},
                { code:"act1_a2_n1", clr:"#decdaa", glimmer:"Be as still as night...",                  status:"not-visited"},
                { code:"act1_a2_n2", clr:"#71542d", glimmer:"...beat of bone on bone.",                 status:"not-visited"},
                { code:"act1_a2_n3", clr:"#880200", glimmer:"...lines like vines one to one.",          status:"not-visited"},
                { code:"act1_a2_n4", clr:"#914937", glimmer:"Paint my body, Nusala.",                   status:"not-visited"},
                { code:"act1_a2_p1", clr:"#fac385", glimmer:"Will you walk with me, Sister?",           status:"not-visited"},
                { code:"act1_a2_p2", clr:"#a61f24", glimmer:"Mine is not a serpent love.",              status:"not-visited"},
                { code:"act1_a2_m1", clr:"#b21f18", glimmer:"Where I sing, love is fire.",              status:"not-visited"},
                { code:"act1_v3_n1", clr:"#603516", glimmer:"...but ethically eage-eyed.",              status:"not-visited"},
                { code:"act1_v3_n2", clr:"#d1a29f", glimmer:"Ach! The issue is beyond measure.",        status:"not-visited"},
                { code:"act1_v3_n3", clr:"#979797", glimmer:"...but also wingéd.",                      status:"not-visited"},
                { code:"act1_v3_n4", clr:"#6d5040", glimmer:"...and didn't she have a sweet face.",     status:"not-visited"},
                { code:"act1_v3_p1", clr:"#a70f12", glimmer:"...in form like a dove.",                  status:"not-visited"},
                { code:"act1_v3_p2", clr:"#a70f12", glimmer:"...petals baited with blood.",             status:"not-visited"},
                { code:"act1_v3_m1", clr:"#9daef2", glimmer:"The tale will tell.",                      status:"not-visited"},
                { code:"act1_t3_n1", clr:"#427b91", glimmer:"Come with me to the city",                 status:"not-visited"},
                { code:"act1_t3_n2", clr:"#bb9fa3", glimmer:"He can a new self make.",                  status:"not-visited"},
                { code:"act1_t3_n3", clr:"#96664b", glimmer:"...unleash the ravening beasts of prey.",  status:"not-visited"},
                { code:"act1_t3_n4", clr:"#b4b2a7", glimmer:"...a demon who wears his spine on his back",              status:"not-visited"},
                { code:"act1_t3_p1", clr:"#b4b2a7", glimmer:"...to Helene's maimed body.",                             status:"not-visited"},
                { code:"act1_t3_p2", clr:"#afb1b0", glimmer:"Beauty dies. Art dies.",                                  status:"not-visited"},
                { code:"act1_t3_m1", clr:"#acb1af", glimmer:"O Father Beware!",                                        status:"not-visited"},
                { code:"act1_a3_n1", clr:"#d59731", glimmer:"Bizarre screed of chants and sticks.",                    status:"not-visited"},
                { code:"act1_a3_n2", clr:"#a6a295", glimmer:"The whore of Babylon is dead.",                           status:"not-visited"},
                { code:"act1_a3_n3", clr:"#aaa596", glimmer:"Up the river we must go.",                                status:"not-visited"},
                { code:"act1_a3_n4", clr:"#fce2d4", glimmer:"The Great Teatro Amazonas.",                              status:"not-visited"},
                { code:"act1_a3_p1", clr:"#b47b33", glimmer:"Do not blot me out of the Book of Life.",                 status:"not-visited"},
                { code:"act1_a3_p2", clr:"#be8245", glimmer:"Show me the wings of freedom.",                           status:"not-visited"},
                { code:"act1_a3_m1", clr:"#cfb086", glimmer:"Man eat cayman. Cayman eat man.",                         status:"not-visited"},
                { code:"act2_v4_h",  clr:"#e8e3c0", glimmer:"Post coitum omne animalium triste est.",                  status:"not-visited"},
                { code:"act2_v4_s",  clr:"#2e2e2e", glimmer:"...gone the lotuses blessing the air with chaste light.", status:"not-visited"},
                { code:"act2_v5_h",  clr:"#980403", glimmer:"Crowing laughter unfurls like a crimson fan.",            status:"not-visited"},
                { code:"act2_v5_s",  clr:"#d88c76", glimmer:"...as when fiery beasts leap to the fray...",             status:"not-visited"},
                { code:"act2_v6_h",  clr:"#aea091", glimmer:"...to the chamber of futurity.",                          status:"not-visited"},
                { code:"act2_v6_s",  clr:"#b42625", glimmer:"Angel, eagle, Eva, Engel.",                               status:"not-visited"},
                { code:"act2_t4_h",  clr:"#a58a73", glimmer:"...where angels plummet past rundled windows...",         status:"not-visited"},
                { code:"act2_t4_s",  clr:"#afb1b0", glimmer:"Flung from the maelstrom of Time...",                     status:"not-visited"},
                { code:"act2_t5_h",  clr:"#bce8f4", glimmer:"Let the dead sleep, Berndt.",                             status:"not-visited"},
                { code:"act2_t5_s",  clr:"#c5c5c5", glimmer:"Wind wrinkles the river, worries the curtains...",        status:"not-visited"},
                { code:"act2_t6_h",  clr:"#aaaaaa", glimmer:"...a moonstruck bestiary, prancing and baying...",        status:"not-visited"},
                { code:"act2_t6_s",  clr:"#7d0000", glimmer:"...demonic dreams of healing fire...",                    status:"not-visited"},
                { code:"act2_a4_h",  clr:"#535554", glimmer:"...The forest weaves a covert of leaves.",                status:"not-visited"},
                { code:"act2_a4_s",  clr:"#562834", glimmer:"Those are pits that were his eyes.",                      status:"not-visited"},
                { code:"act2_a5_h",  clr:"#cabfaa", glimmer:"Who are these so strangely fashioned?",                   status:"not-visited"},
                { code:"act2_a5_s",  clr:"#65594b", glimmer:"...bitter auguries of raucous fowl...",                   status:"not-visited"},
                { code:"act2_a6_h",  clr:"#943420", glimmer:"...High piping pf ardent birds...",                       status:"not-visited"},
                { code:"act2_a6_s",  clr:"#f91c1f", glimmer:"The specter in the fire fixes an eyeless gaze...",        status:"not-visited"},
                { code:"act3_v_h",   clr:"#ab7534", glimmer:"Ah Eva. Engel, angel, apple of our eye.",                 status:"not-visited"},
                { code:"act3_v_s",   clr:"#3f8060", glimmer:"...Impaled on the finial of a cat's eye...",              status:"not-visited"},
                { code:"act3_t_h",   clr:"#6c3637", glimmer:"...music flares in the sky like a phoenix...",            status:"not-visited"},
                { code:"act3_t_s",   clr:"#d48368", glimmer:"The wind of Chaos annihilates the antipodes.",            status:"not-visited"},
                { code:"act3_a_h",   clr:"#c2da6e", glimmer:"All signs favorable, howlers subdued.",                   status:"not-visited"},
                { code:"act3_a_s",   clr:"#c9c6ae", glimmer:"The house of the moon is grimed.",                        status:"not-visited"},
                { code:"finale",     clr:"#abcb3a", glimmer:"Scarab Exits",                                            status:"not-visited"}
            ]
        }

        // then get the saved state from localStorage
        let localStorageCurrentAct = localStorage.getItem('currentAct')
        let localStorageFinaleAvailable = localStorage.getItem('finaleAvailable')
        window.state.currentAct = localStorageCurrentAct
        window.state.finaleAvailable = localStorageFinaleAvailable

        let localStorageEpisodeData = localStorage.getItem('episodes')
        if (localStorageEpisodeData !== null) {
            window.state.episodes =  JSON.parse(localStorageEpisodeData)
        }
    })

    window.loadTextFromFile = function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
            localStorage.setItem('episodes', e.target.result)
            window.location.href="urworld.html"
        }
        reader.readAsText(file);
    }

    window.downloadProgress = function() {
        let body = localStorage.getItem('episodes')
        let element = document.createElement('a');
        element.setAttribute('href',
            'data:text/plain;charset=utf-8, '
            + encodeURIComponent(body));
        let fileNameText = document.getElementById('fileNameInput').value
        element.setAttribute('download', fileNameText);
        document.body.appendChild(element);
        element.click();
        document.body.removeChild(element);
    }

    window.clearProgressAndGoBack = function() {
        for( let i = 0; i < window.state.episodes.length; i++) {
            window.state.episodes[i].status = "not-visited"
            localStorage.setItem(i.toString(), "not-visited")
        }
        localStorage.setItem('episodes', JSON.stringify(clearAll.episodes))
        localStorage.setItem('currentAct', 'act1')
        localStorage.setItem('finaleAvailable', 'false')
        window.location.href="urworld.html"
    }

    window.testAFewInAct1 = function(){
        localStorage.setItem('episodes', JSON.stringify(aFewInAct1.episodes))
        window.location.href="urworld.html"
    }

    window.testAboutToFinishAct1 = function(){
        localStorage.setItem('episodes', JSON.stringify(aboutToFinishAct1.episodes))
        window.location.href="urworld.html"
    }

    window.testAboutToFinishAct2 = function(){
        localStorage.setItem('episodes', JSON.stringify(aboutToFinishAct2.episodes))
        window.location.href="urworld.html"
    }

    window.testEnableFinale = function(){
        localStorage.setItem('episodes', JSON.stringify(enableFinale.episodes))
        window.location.href="urworld.html"
    }

    window.toggleTests = function (e) {
        if (document.getElementById('tests').style.display === 'none') {
            document.getElementById('tests').style.display = 'block'
        } else {
            document.getElementById('tests').style.display = 'none'
        }
        e.preventDefault()
    }
</script>

</body>
</html>
